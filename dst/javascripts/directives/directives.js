onceUpon.directive("onceAudio",["SentencesFactory",function(n){function e(e,t,c){c.$observe("onceAudio",function(c){t.attr("src","/getRecording/"+c),e.sentences=n.sentences,e.$watch(function(){return n.sentences},function(c,i){e.sentences=c;var o=n.sentences.indexOf(e.sentence),r=n.sentences.length;r-1>o?t.bind("ended",function(){var e=t.context.parentElement.nextElementSibling;t.parent().removeClass("playing"),angular.element(e).addClass("playing"),e.lastElementChild.play(),n.currentlyPlaying=e}):t.bind("ended",function(){n.currentlyPlaying=null,t.parent().removeClass("playing")})})})}return{restrict:"A",scope:{onceAudio:"@",sentence:"="},link:e}}]),onceUpon.directive("oncePlayFrom",["SentencesFactory",function(n){function e(e,t,c){t.bind("click",function(){t.find("audio")[0].play(),t.addClass("playing"),n.currentlyPlaying=t[0],console.dir(n.currentlyPlaying)})}return{restrict:"A",scope:{onceGetAudio:"@"},link:e}}]);